
# TBAGenerator

Testbench Automatic Generator uses the commercial Verific library to extract ports and top module from the IP described in a Verilog file and automatically generate core testbench file to test it functionality. It look for and loads specified test-vectors file. This test-vectors file also can be generated by other tool. It can be written manually also.
Testbench example generated by TBAGenerator:

```javascript
`timescale 1 ns /  100 ps
module counter;
reg  clk; 
reg  reset; 
reg  enable; 
reg  [3:0] count; 


initial
   begin
 $display("\t\ttime,  \tclk  \treset  \tenable  \tcount");
 $monitor("%d,\t%b,  \t%b,  \t%b,  \t%b,\t%d",$time,  \tclk,  \treset,  \tenable,  \tcount");
 $dumpfile ("counter.vcd");
 $dumpvars;
end


initial
   begin
   clk =0;
   reset =0;
   enable =0;
#10   reset =1;
#10   enable =1;
#10   count =4'bXXXX;
#10   reset =0;
#10   enable =1;
#10   count =4'b0000;
#10   reset =0;
#10   enable =1;
#10   count =4'b0001;
#10   reset =0;
#10   enable =0;
#10   count =4'b0001;
#10   reset =1;
#10   enable =1;
#10   count =4'b0000;
#10  $finish;
end


always
#50 clk = ~clk
always
#10 clk2 = ~clk2


counter  U0 (
 .clk  (clk),
 .reset  (reset),
 .enable  (enable),
 .count  (count)
);


endmodule

```
Since the Verific library is a commercial source that is paid for, it is not included here.                                                                                                                       For information about the Verific Verilog parser and library, see www.verific.com. 


## Build
Open the provided .pro file in QTCreator and run the build.
Tested and built in Windows 10, it should open and convert without problems in Linux.
For a successful build, you need the full source code of Verific.
Under Linux, after opening the .pro file, a full Makefile is written, which can also be built with the make command.
## Usage

```javascript
Usage: TBAGenerator:
        -i      <input Verilog IP file>
        -o     <generated tb file>
        -clks {list of clocks} <input ports defined as clocks and periods in ns>
           Example: -clks {clk1 nanosec1,clk2 nanosec2...}
        -testvec <Input test-vectors file>

```


## Test
Located in the test_designs folder is a simple counter written in Verilog HDL. 
You can see the sample exported tb file in tb.v.
The example test-vector file is test_vectors.tv.
## Run test
```javascript
TBAGenerator -i ..\test_designs\counter.v  -clks {clk:50 , clk2:10}  -testvec ..\test_designs\test_vectors.tv  -o tb.v 
```
